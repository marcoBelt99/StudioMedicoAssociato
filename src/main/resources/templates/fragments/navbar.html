<!--  -->
<div th:fragment="navbar"
     xmlns:sec="http://www.w3.org/1999/xhtml">


    <header
            class="it-header-wrapper it-header-sticky"
            data-bs-toggle="sticky"
            data-bs-position-type="fixed"
            data-bs-sticky-class-name="is-sticky"
            data-bs-target="#header-nav-wrapper"
    >
        <div class="it-header-slim-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="it-header-slim-wrapper-content">
                            <a class="d-lg-block navbar-brand" href="#">Regione Veneto</a>
                            <div class="it-header-slim-right-zone">
                                <div class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
                                        <span class="visually-hidden">Selezione lingua: lingua selezionata</span>
                                        <span>ITA</span>
                                        <svg class="icon d-none d-lg-block">
                                            <use th:href="@{/svg/sprites.svg#it-expand}"></use>
                                        </svg>
                                    </a>
                                    <div class="dropdown-menu">
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="link-list-wrapper">
                                                    <ul class="link-list">
                                                        <li>
                                                            <a class="dropdown-item list-item" href="#"
                                                            ><span>ITA <span class="visually-hidden">selezionata</span></span></a
                                                            >
                                                        </li>
                                                        <li>
                                                            <a class="dropdown-item list-item" href="#"><span>ENG</span></a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

        <!-- ######################################################## -->
        <!-- Bottone login/logout: da trasformare in dropdown   -->
        <!-- ######################################################## -->
                <!-- ######################## -->
                <!-- TODO: UTENTE NON LOGGATO -->
                <!-- ######################## -->
                            <!-- <div th:if="${userName == null or userName == ''}" > &lt;!&ndash; Approccio deprecato!! &ndash;&gt;-->
                                <div sec:authorize="!isAuthenticated"> <!-- !!! MEGLIO QUESTO, così delego la gestione direttamente a Spring Security !!! -->
                                    <a class="btn btn-primary btn-icon btn-full" th:href="@{/login}" title="Accedi all'area personale" aria-label="Accedi all'area personale">
                                        <span class="rounded-icon">
                                          <svg class="icon icon-primary">
                                             <use th:href="@{/svg/sprites.svg#it-user}"></use>
                                          </svg>
                                        </span>
                                        <span class="d-none d-lg-block">Accedi all'area personale</span>
                                    </a>
                                </div>
                <!-- ######################## -->
                <!-- TODO: UTENTE LOGGATO -->
                <!-- ######################## -->
                          <!--  <div th:if="${userName != null and userName != ''}"> &lt;!&ndash; Approccio deprecato!! &ndash;&gt; -->
                                <div sec:authorize="isAuthenticated"> <!-- !!! MEGLIO QUESTO, così delego la gestione direttamente a Spring Security !!! -->
                                    <div class="btn-group">
                                        <a type="button" class="btn btn-primary btn-icon dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span class="rounded-icon">
                                                <svg class="icon icon-primary">
                                                    <use th:href="@{/svg/sprites.svg#it-user}"></use>
                                                </svg>
                                            </span>
                                      <!-- <span th:text="${userName}"></span>--> <!-- !!! vecchio modo per mostrare lo username -->
                                            <span sec:authentication="principal.username"></span> <!-- !!! meglio questo, così delego la gestione direttamente a Spring Security !!! -->
                                            <svg class="icon-expand icon icon-sm icon-light">
                                                <use th:href="@{/svg/sprites.svg#it-expand}"></use>
                                            </svg>
                                        </a>
                                        <div class="dropdown-menu">
                                            <div class="link-list-wrapper">
                                                <ul class="link-list">
                                                    <li><a class="dropdown-item list-item" href="#"><span>Profilo </span></a></li>
<!--                                                    <li><a class="dropdown-item list-item" href="#"><span>Azione 2</span></a></li>-->
                                                    <li><hr class="dropdown-divider"></li>
                                                    <li><a class="dropdown-item list-item" th:href="@{/logout}"><span>Logout</span></a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="it-nav-wrapper">
            <div class="it-header-center-wrapper">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="it-header-center-content-wrapper">
                                <div class="it-brand-wrapper">
<!--                                    <a href="#">-->
                                    <a th:href="@{/index}">
                                            <img th:src="@{/svg/asl-icon.svg}" alt="Icona ASL" class="icon">
                                        <div class="it-brand-text">
                                            <div class="it-brand-title ">SMA-RT</div>
                                            <div class="title">Studio Medico Associato</div>
                                            <div class="it-brand-tagline d-none d-md-block">Portale per pazienti, medici e infermieri</div>
                                        </div>
                                    </a>
                                </div>
                                <div class="it-right-zone">
                                    <div class="it-socials d-none d-md-flex">
                                        <span>Seguici su</span>
                                        <ul>
                                            <li>
                                                <a href="#" aria-label="Facebook" target="_blank">
                                                    <svg class="icon">
                                                        <use th:href="@{/svg/sprites.svg#it-facebook}"></use>
                                                    </svg>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://github.com/marcoBelt99/" aria-label="Github" target="_blank">
                                                    <svg class="icon">
                                                        <use th:href="@{/svg/sprites.svg#it-github}"></use>
                                                    </svg>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#" aria-label="Twitter" target="_blank">
                                                    <svg class="icon">
                                                        <use th:href="@{/svg/sprites.svg#it-twitter}"></use>
                                                    </svg>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="it-search-wrapper">
                                        <span class="d-none d-md-block">Cerca</span>
                                        <a class="search-link rounded-icon" aria-label="Cerca nel sito" href="#">
                                            <svg class="icon">
                                                <use th:href="@{/svg/sprites.svg#it-search}"></use>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="it-header-navbar-wrapper" id="header-nav-wrapper">
                <div class="container">
                    <div class="row">
                        <div class="col-12">


<!--########################################-->
<!-- TODO: start nav-->
<!--########################################-->

                            <nav class="navbar navbar-expand-lg has-megamenu" aria-label="Navigazione principale">
                                <button
                                        class="custom-navbar-toggler"
                                        type="button"
                                        aria-controls="nav4"
                                        aria-expanded="false"
                                        aria-label="Mostra/Nascondi la navigazione"
                                        data-bs-target="#nav4"
                                        data-bs-toggle="navbarcollapsible"
                                >
                                    <svg class="icon">
                                        <use th:href="@{/svg/sprites.svg#it-burger}"></use>
                                    </svg>
                                </button>
                                <div class="navbar-collapsable" id="nav4" style="display: none">
                                    <div class="overlay" style="display: none"></div>
                                    <div class="close-div">
                                        <button class="btn close-menu" type="button">
                                            <span class="visually-hidden">Nascondi la navigazione</span>
                                            <svg class="icon">
                                                <use th:href="@{/svg/sprites.svg#it-close-big}"></use>
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="menu-wrapper">

                        <!-- ###################### -->
                        <!-- TODO: PAZIENTE -->
                        <!-- ###################### -->
                                        <ul sec:authorize="hasRole('ROLE_PAZIENTE')"
                                            class="navbar-nav">


                                            <li class="nav-item ">
                                                <a class="nav-link" th:href="@{/prenotazione}">
                                                    <span>Prenota</span>
                                                </a>
                                            </li>


                                    <!-- Dropdown menu' per Paziente -->
                                            <li class="nav-item dropdown">
                                                <a class="main-nav-link nav-link dropdown-toggle text-truncate"
                                                   data-node="1328" data-toggle="dropdown" data-bs-toggle="dropdown" aria-expanded="false"
                                                   href="/visite" title="Vai alla pagina: visite">
                                                    <span>Visite</span>
                                                    <svg class="icon" aria-hidden="true" focusable="false">
                                                        <use th:href="@{/svg/sprites.svg#it-expand}"></use>
                                                    </svg>
                                                </a>
                                                <div class="dropdown-menu p-2">
                                                    <div class="p-2 mb-2 border-bottom text-center">
                                                        <a data-node="1328"
                                                           th:href="@{/paziente/visite/all}" title="Vai alla pagina: Elenco Visite">
                                                            <small class="text-uppercase">Elenco Visite</small>
                                                        </a>
                                                    </div>
                                                    <div class="link-list-wrapper">
                                                        <ul class="link-list">
                                                            <li>
                                                                <a class="list-item" data-node="1335"
                                                                   th:href="@{/paziente/visite?effettuata=false}">
                                                                    <span>Visite Prenotate</span>
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a class="list-item" data-node="15469"
                                                                   th:href="@{/paziente/visite?effettuata=true}">
                                                                    <span>Visite Effettuate</span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="nav-item ">
                                                <a class="nav-link" th:href="@{/paziente/esiti/all}">
                                                    <span>Esiti</span>
                                                </a>
                                            </li>

                                            <li class="nav-item ">
                                                <a class="nav-link "
                                                   th:href="@{/chiSiamo}">
                                                    <span>Chi siamo</span>

                                                </a>
                                            </li>

                                        </ul>


                        <!-- ###################### -->
                        <!-- TODO: MEDICO -->
                        <!-- ###################### -->
                                        <ul sec:authorize="hasRole('ROLE_MEDICO')"
                                            class="navbar-nav">

                                            <li class="nav-item ">
                                                <a class="nav-link "
                                                   th:href="@{/medico/prenotazioni}">
                                                    <span>Prenotazioni</span>
                                                </a>
                                            </li>


                                            <!--  Dropdown menu'visite per Medico  -->
                                            <li class="nav-item dropdown">
                                                <a class="main-nav-link nav-link dropdown-toggle text-truncate"
                                                   data-node="1328" data-toggle="dropdown" data-bs-toggle="dropdown" aria-expanded="false"
                                                   href="/visite" title="Vai alla pagina: visite">
<!--                                                    href="/Lo-sportello" title="Vai alla pagina: Lo sportello">-->
                                                    <span>Visite</span>
                                                    <svg class="icon" aria-hidden="true" focusable="false">
                                                        <use th:href="@{/svg/sprites.svg#it-expand}"></use>
                                                    </svg>
                                                </a>
                                                <div class="dropdown-menu p-2">
                                                    <div class="p-2 mb-2 border-bottom text-center">
                                                        <a data-node="1328"
                                                           th:href="@{/medico/visite/all}" title="Vai alla pagina: Elenco Visite">
                                                            <small class="text-uppercase">Elenco Visite</small>
                                                        </a>
                                                    </div>
                                                    <div class="link-list-wrapper">
                                                        <ul class="link-list">
                                                            <li>
                                                                <a class="list-item" data-node="1335"
                                                                   th:href="@{/medico/visite?effettuata=false}">
                                                                    <span>Visite Prenotate</span>
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a class="list-item" data-node="15469"
                                                                   th:href="@{/medico/visite?effettuata=true}">
                                                                    <span>Visite Effettuate</span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="nav-item ">
                                                <a class="nav-link " th:href="@{/medico/esiti/all}">
                                                    <span>Esiti</span>
                                                </a>
                                            </li>

                                        </ul>



                                <!-- ###################### -->
                                <!-- TODO: Utente anonimo -->
                                <!-- ###################### -->
                                        <ul sec:authorize="isAnonymous()"
                                            class="navbar-nav">

                                            <li class="nav-item ">
                                                <a class="nav-link "
                                                   th:href="@{/benvenuto}">
                                                    <span>Prestazioni</span>
                                                </a>
                                            </li>


                                            <li class="nav-item ">
                                                <a class="nav-link "
                                                   th:href="@{/chiSiamo}">
                                                    <span>Chi siamo</span>

                                                </a>
                                            </li>

                                        </ul>

                                        <ul class="navbar-nav navbar-secondary">
                                            <li class="nav-item">
                                                <a class="nav-link" href="/bootstrap-italia/docs/esempi/comuni/template-argomenti-argomento/"> Argomento 1</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="#"> Argomento 2</a>
                                            </li>
                                            <li class="nav-item ">
                                                <a class="nav-link " href="/bootstrap-italia/docs/esempi/comuni/template-argomenti">
                                                    <span class="fw-bold">Tutti gli argomenti...</span>

                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>




</div>